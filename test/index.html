<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<title>TUNA UNIT TEST</title>

<!-- Tuna Framework -->
<script type="text/javascript" src="../js/tuna.js"></script>

<!-- Стили и классы -->
<style type="text/css">
* {
	padding: 0px;
	margin: 0px;
}

.Console {
	height: 500px;
	overflow: scroll;
	border: 1px gray solid;
	background: #CCCCCC;
	margin: 10px;
}

.Header {
	margin-top: 10px;
	text-align: center;
}
</style>
</head>

<body>
<div class="Header"><!-- Кнопка запуска теста --> <input
	id="run_test_button" type="button" value="Запустить тест"
	onclick="testSuite.run();
							var text = document.getElementById('html_text').value;
							var decodedText = decodeSpecialChars(text);
							trace(decodedText);

							decodedText = decodedText.replace(/\x26amp;/g,'aaammmppp');
							trace(decodedText);
							trace(checkXML(decodedText));" />
</div>

<textarea id="html_text" rows="30" cols="100" style="width: 100%;"></textarea>

<!-- Консосль вывода отладочных сообщений -->
<div id="console" class="Console"></div>

<!-- Загруза скриптов и установка глобальных переменных -->
<script type="text/javascript">
	//         
	/////////////////////////////////////////////////////////////////////////////
	//	Загрузка зависимостей
	/////////////////////////////////////////////////////////////////////////////

	tuna.MERGE_URI = "../" + tuna.MERGE_URI;
	tuna.JS_ROOT = "../" + tuna.JS_ROOT;

	tuna.include("tuna.debug.Logger");
	tuna.include("tuna.debug.TextNodeWriter");
	tuna.include("tuna.test.Assert");
	tuna.include("tuna.test.ITest");
	tuna.include("tuna.test.ITestHandler");
	tuna.include("tuna.test.TestCase");
	tuna.include("tuna.test.TestResult");
	tuna.include("tuna.test.TestSuite");
	tuna.include("tests.UtilsTest");
	tuna.include("tests.EventTest");

	tuna.debug.logger.setWriter(new TextNodeWriter("console"));

	/////////////////////////////////////////////////////////////////////////////
	//	Инициализация и запуск теста
	/////////////////////////////////////////////////////////////////////////////

	/**
	 * Объект хранения и вывода отладочных сообщений.
	 *
	 * @type tuna.test.TestResult
	 */
	var testResult = new TestResult();
	testResult.setWriter(new TextNodeWriter("console"));

	/**
	 * Набор тестов.
	 *
	 * @type tuna.test.TestSuite
	 */
	var testSuite = new TestSuite("TUNA FRAMEWORK TESTS");
	testSuite.setTestResult(testResult);

	testSuite.addTest(new UtilsTest());
	testSuite.addTest(new EventTest());

	//
</script>
</body>
</html>
