<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <title>Tuna Framework by kononencheg</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>
<body>
<div class="wrapper">
    <header>
        <h1>Tuna Framework</h1>

        <p>Удобная архитектурная библиоткека для клиентских веб-приложений.</p>

        <ul>
            <li><a href="#overwiev">Обзор</a></li>
            <li><a href="#structure">Структура библиотеки</a></li>
            <li><a href="#requirements">Зависимости</a></li>
            <li>
                <a href="#app-structure">Структура приложения</a>
                <ul class="submenu">
                    <li><a href="#build">Сборка приложения</a></li>
                </ul>
            </li>
            <li><a href="#hello-world">Простейшее приложение</a></li>
        </ul>

        <ul class="downloads">
            <li>
                <a href="https://github.com/kononencheg/Tuna-Framework/zipball/master">
                    Скачать <strong>ZIP Архив</strong>
                </a>
            </li>
            <li>
                <a href="https://github.com/kononencheg/Tuna-Framework/tarball/master">
                    Скачать <strong>TAR Архив</strong>
                </a>
            </li>
            <li>
                <a href="https://github.com/kononencheg/Tuna-Framework">
                    Проект на <strong>GitHub</strong>
                </a>
            </li>
        </ul>
    </header>
    <section>
        <a name="top"></a>

        <h2>
            <a name="overwiev"></a> Обзор
        </h2>

        <p>
            Tuna Framework предоставляет удобную и надежную основу для сложных
            веб приложений. Основными преимуществами библиотеки являются:
        </p>

        <ol>
            <li>
                <em>Удобство</em> - для написания простейшего приложения
                требуется лишь указать список используемых на странице
                модулей-компонентов.
            </li>
            <li>
                <em>Скорость</em> - структура приложения максимально
                оптимизированна на каждом уровне.
            </li>
            <li>
                <em>Расширяемость</em> - для добавления нового функционала можно
                использовать любые библиотеки - нет строгой привязки к
                компонентам Tuna Framework.
            </li>
            <li>
                <em>Строгость</em> - код библиотеки компилируется с помощью
                <a href="https://developers.google.com/closure/compiler/"
                   target="_blank">
                    Closure Compiler
                </a>
                в режиме продвинутой оптимизации (<code>ADVANCED_OPTIMIZATIONS</code>).
            </li>
            <li>
                <em>Компактность</em> - после сжатия с помощью Closure
                Compiler'а <code>ADVANCED</code> режиме код ужимается до
                50кб (92%), в режиме обычного сжатия - до 90кб (85%).
            </li>
            <li>
                <em>Кросс-браузерность</em> - библиотека работает во всех современных
                (возможно и не современных) браузерах.
            </li>
        </ol>

        <h2>
            <a name="structure"></a> Структура библиотеки
        </h2>

        <p>
            Tuna Framework применяет концепцию MVC, компоненты которой
            реализуются в соответсвующих областях имен:
        </p>

        <ul>
            <li>
                Отображение

                <ul>
                    <li>
                        <code>tuna.ui</code> - классы-компоненты отображения,
                        такие как кнопки, всплывающие окна, списки выделения и тд.
                    </li>
                </ul>
            </li>
            <li>
                Модель

                <ul>
                    <li>
                        <code>tuna.model</code> - классы для работы с моделью
                        данных приложения.
                    </li>
                    <li>
                        <code>tuna.rest</code> - классы для работы с удаленной
                        моделью данных приложения через REST-интерфейс.
                    </li>
                </ul>
            </li>
            <li>
                Контроллер

                <ul>
                    <li>
                        <code>tuna.control</code> - базовые классы управления
                        логикой приложения.
                    </li>
                </ul>
            </li>
        </ul>

        <p>
            Дополнительно библиотека содержит вспомогательный функционал,
            используемый в основных компонентах библиотеки:
        </p>

        <ul>
            <li>
                <code>tuna.events</code> - классы реализующие событийную модель
                используемую в приложении;
            </li>
            <li>
                <code>tuna.tpml</code> - классы очень быстрого шаблонизатора;
            </li>
            <li>
                <code>tuna.dom</code> - функции работы с DOM-моделью браузера,
                для обеспечения полной функциональности требуется установить
                движок CSS-селекторов, например
                <a href="http://sizzlejs.com/" target="_blank">Sizzle</a>;
            </li>
            <li>
                <code>tuna.net</code> - классы обращения к удаленным источникам
                данных;
            </li>
            <li>
                <code>tuna.utils</code> - общие вспомогательные функции;
            </li>
        </ul>

        <h2>
            <a name="requirements"></a> Зависимости
        </h2>

        <p>
            На данный момент, для корректной работы, библиотека требует движок
            CSS-селекторов соответсвующий внешнему интерфейсу движка
            <a href="http://sizzlejs.com/" target="_blank">Sizzle</a>.
        </p>

        <p>
            Список необходимых методов движка CSS-селекторов:
        </p>

        <ul>
            <li>
                <code>selectorEngine(selector, context)</code> - Поиск элементов
                соотвествующих указанному селектору в указанном контексте.
            </li>
            <li>
                <code>selectorEngine.matches(selector, elements)</code> -
                Фильтрация элементов соотвествующих указанному селектору.
            </li>
            <li>
                <code>selectorEngine.matchesSelector(element, selector)</code> -
                Проверка соответствия элемента селектору.
            </li>
        </ul>

        <p>
            Так же, в качестве используемых имен утилитарных CSS-классов,
            используются имена соответсвующие классам библиотеки
            <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>.
        </p>

        <p>
            Например:
        </p>

        <ul>
            <li>
                <code>hide</code> - спрятанный элемент,
            </li>
            <li>
                <code>show</code> - отображенный элемент,
            </li>
            <li>
                <code>active</code> - активный элемент,
            </li>
            <li>
                <code>...</code>
            </li>
        </ul>

        <h2>
            <a name="app-structure"></a> Структура приложения
        </h2>

        <p>
            Репозиторий приложения обычно имеет следующую структуру:
        </p>

        <ul>
            <li>
                <code>application</code> - папка содержащая исходные коды
                конкретного приложения.
            </li>
            <li>
                <code>library</code> - папка содержащая исходные коды
                библиотек, используемых в приложении.
            </li>
            <li>
                <code>public</code> - корневая папка веб-приложения, в которую
                "собираются" исходники приложения.
            </li>
            <li>
                <code>templates</code> - папка содержащая html-шаблоны
                приложения.
            </li>
            <li>
                <code>utils</code> - папка с утилитами для сборки приложения.
            </li>
            <li>
                <code>Makefile</code> - файл сценария сборки приложения из
                исходников.
            </li>
        </ul>

        <h3>
            <a name="build"></a> Сборка приложения
        </h3>

        <p>
            Для сборки приложения удобно использовать утилиту
            <a href="http://www.gnu.org/software/make/">GNU Make</a> (для
            <a href="http://gnuwin32.sourceforge.net/packages/make.htm" target="_blank">windows</a>)
            в связке с приложениями для сжатия/объединения <code>javascript</code>
            (например <a href="https://developers.google.com/closure/compiler/" target="_blank">Closure Compiler</a>,
            <a href="https://github.com/mishoo/UglifyJS">Uglify JS</a>, ...)
            и для сбоки <code>html</code>-шаблонов (например <a href="http://mustache.github.com/">mustache</a>).
        </p>

        <p>
            Пример <a href="https://gist.github.com/2405728" target="_blank">make-файла</a> для "компиляции" приложения
            использующего Tuna Framework.
        </p>

        <h2>
            <a name="hello-world"></a> Простейшее приложение
        </h2>

        <p>
            Для созданий простейшего приложения используем базовый шаблон
            проекта
            <a href="http://github.com/kononencheg/Hello-Tuna-Framework" target="_blank">
                Hello Tuna Framework
            </a>.
        </p>

        <p>
            Клонируем репозиторий проекта:
        </p>

        <pre><code>$ git clone git://github.com/kononencheg/Hello-Tuna-Framework.git</code></pre>

        <p>
            Основной код приложения содержится в файле
            <code>application/control/main-controller.js</code>:
        </p>

        <pre><code>var MainController = function() {
    tuna.control.ViewController.call(this);
    this._modules = [ 'popup' ];
};

tuna.utils.extend(MainController, tuna.control.ViewController);

MainController.prototype._initActions = function() {
    // Логика приложения инициализируется тут
};

tuna.control.setMainController(new MainController());</code></pre>

        <p>
            Список имен модулей-компонентов отображения, которые необходимо
            проинициализировать в соответствующем контейнере находятся в массиве
            <code>this._modules</code>.
        </p>

        <p>
            В данном примере в основном контейнере приложения проинициализируется
            модуль отображения <code>popup</code>.
        </p>

        <p>
            Разметка контейнера отображения (<code>body</code>
            для основного контроллера) расположена в файле
            <code>public/index.html</code>:
        </p>

        <pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot; /&gt;
    &lt;title&gt;Hello Tuna Framework!&lt;/title&gt;
    &lt;link rel=&quot;stylesheet&quot; type=&quot;text/css&quot;
          href=&quot;css/bootstrap.css&quot; /&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;j-popup hide&quot; data-name=&quot;hello-popup&quot;&gt;
        &lt;div class=&quot;modal&quot;&gt;
            &lt;div class=&quot;modal-header&quot;&gt;
                &lt;h3&gt;Hello Tuna Framework!&lt;/h3&gt;
            &lt;/div&gt;

            &lt;div class=&quot;modal-body&quot;&gt;
                &lt;a class=&quot;j-popup-close btn pull-right&quot;&gt;
                    Close
                &lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class=&quot;modal-backdrop&quot;&gt;&lt;/div&gt;
    &lt;/div&gt;

    &lt;!--[if IE]&gt;--&gt;
        &lt;script type=&quot;text/javascript&quot; src=&quot;js/json.js&quot;&gt;&lt;/script&gt;
    &lt;!--&lt;![endif]--&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;js/sizzle.js&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot; src=&quot;js/app.js&quot;&gt;&lt;/script&gt;
    &lt;script type=&quot;text/javascript&quot;&gt;
        main(document.body);
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

        <p>
            Блок <code>div</code> c CSS-классом <code>j-popup</code> при
            инициализации отображения будет являться целевым DOM-элементом для
            модуля <code>popup</code>. Для корректной работы модуля
            <code>popup</code>, целевой контейнер в исходном состоянии должен быть
            спрятан, для этого используется класс <code>hide</code>.
        </p>

        <p>
            Чтобы показать всплывающее окно, необходимо добавить следующий код в
            тело метода <code>_initActions()</code> класса <code>MainController</code>:
        </p>

        <pre><code>MainController.prototype._initActions = function() {
    // По типу модуля и имени получаем экземпляр класса всплывающего окна.
    var popup = this._container.getModuleInstanceByName('popup', 'hello-popup');

    // Показываем окно
    popup.open();
};</code></pre>

        <p>
            <a href="#build">Собираем</a> приложение и проверяем
            <a href="http://kononencheg.github.com/Hello-Tuna-Framework/" target="_blank">работающий пример</a>!
        </p>

        <pre><code>$ make && firefox public/index.html</code></pre>

    </section>

    <footer>
        <p>
            Автор: <a href="https://github.com/kononencheg">kononencheg</a>
        </p>
    </footer>
</div>
<script src="javascripts/scale.fix.js"></script>

</body>
</html>