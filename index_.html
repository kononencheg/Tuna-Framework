<!doctype html>
<html xmlns:tuna>
    <head>
        <meta charset="utf-8">

        <title>Tuna Templates</title>

        <link rel="stylesheet" href="css/prettify.css" />
        <link rel="stylesheet" href="css/bootstrap.css">
        <link rel="stylesheet" href="css/styles.css">

        <!--[if lt IE 9]>
        <script type="text/javascript"
                src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->

    </head>

    <body>

        <a href="http://github.com/kononencheg/Tuna-Framework">
            <img class="fork-me-ribbon"
                 src="http://goo.gl/O5hru"
                 alt="Fork me on GitHub">
        </a>

        <div class="container">
            <div class="page-header span4">
                <h1>
                    Tuna Framework <br/>
                    <small>Aрхитектурная библиотека.</small>
                </h1>

                <hr />

                <div class="well">
                    <ul class="nav nav-list">
                        <li class="nav-header">Навигация</li>

                        <li><a href="#overwiev">Обзор</a></li>
                        <li><a href="#structure">Структура библиотеки</a></li>
                        <li><a href="#requirements">Зависимости</a></li>
                        <li><a href="#app-structure">Структура приложения</a></li>
                        <li><a href="#build">Сборка приложения</a></li>
                        <li><a href="#hello-world">Простейшее приложение</a></li>
                        <li><a href="#what-next">Что дальше?</a></li>

                        <li class="divider"></li>

                        <li class="nav-header">
                            <a href="index_.html">Tuna Framework</a>
                        </li>

                        <li><a href="https://github.com/kononencheg/Tuna-Common">Tuna Common</a></li>
                        <li><a href="templates_.html">Tuna Templates</a></li>
                        <li><a href="https://github.com/kononencheg/Tuna-MVC">Tuna MVC</a></li>

                        <li class="divider"></li>
                        <li class="nav-header">Примеры приложений</li>
                        <li><a href="todo-list.html">Список задач</a></li>

                    </ul>
                </div>

                <hr />

                <address>
                    <strong>Сергей Кононенко</strong><br>
                    <a href="mailto:kononencheg@gmail.com">
                        kononencheg@gmail.com
                    </a>
                </address>

            </div>

            <div class="row">
                <div class="span7 offset5">

                    <h2>
                        <a name="overwiev"></a> Обзор
                    </h2>

                    <hr />

                    <p>
                        Tuna Framework предоставляет удобную и надежную основу для сложных
                        веб приложений. Основными преимуществами библиотеки являются:
                    </p>

                    <ol>
                        <li>
                            <strong>Удобство</strong> - для написания простейшего приложения
                            требуется лишь указать список используемых на странице
                            модулей-компонентов.
                        </li>
                        <li>
                            <strong>Скорость</strong> - структура приложения максимально
                            оптимизированна на каждом уровне.
                        </li>
                        <li>
                            <strong>Расширяемость</strong> - для добавления нового функционала можно
                            использовать любые библиотеки - нет строгой привязки к
                            компонентам Tuna Framework.
                        </li>
                        <li>
                            <strong>Строгость</strong> - код библиотеки компилируется с помощью
                            <a href="https://developers.google.com/closure/compiler/"
                               target="_blank">
                                Closure Compiler
                            </a>
                            в режиме продвинутой оптимизации (<code>ADVANCED_OPTIMIZATIONS</code>).
                        </li>
                        <li>
                            <strong>Компактность</strong> - после сжатия с помощью Closure
                            Compiler'а в <code>ADVANCED</code> режиме код ужимается до
                            50кб (92%), в режиме обычного сжатия - до 90кб (85%).
                        </li>
                        <li>
                            <strong>Кросс-браузерность</strong> - библиотека работает во всех современных
                            (возможно и не современных) браузерах.
                        </li>
                    </ol>

                    <h2>
                        <a name="structure"></a> Структура библиотеки
                    </h2>

                    <hr />

                    <p>
                        Tuna Framework предоставляет набор библиотек, которые можно
                        использовать как вместе, так и поотдельности:
                    </p>

                    <ul>
                        <li>
                            <a href="http://github.com/kononencheg/Tuna-Common">Tuna Common</a> -
                            базовая часть библиотеки, предоставляющая
                            общие вспомогательные функции, класс обращения к удаленным
                            источникам данных и функции работы с DOM-моделью браузера и др.
                            Для обеспечения полной функциональности требуется установить
                            движок CSS-селекторов, например
                            <a href="http://sizzlejs.com/" target="_blank">Sizzle</a>
                        </li>

                        <li>
                            <a href="templates_.html">Tuna Templates</a> -
                            очень быстрый <em>ленивый</em> шаблонизатор. Для работы требует
                            <a href="http://github.com/kononencheg/Tuna-Common">Tuna Common</a>.
                        </li>
                        <li>
                            <a href="http://github.com/kononencheg/Tuna-MVC">Tuna MVC</a> -
                            оптимальная (пожалуй) реализация концепции MVC. Данная часть
                            библиотеки предоставляет удобную работу с модулями отображения и
                            моделью данных. Для работы требует
                            <a href="http://github.com/kononencheg/Tuna-Templates">Tuna Templates</a>.
                        </li>
                        <li>
                            <a href="http://github.com/kononencheg/Tuna-UI-Modules">Tuna UI Modules</a> -
                            набор модулей отображения для использования с
                            <a href="http://github.com/kononencheg/Tuna-MVC">Tuna MVC</a>.
                        </li>
                    </ul>

            <!--p>
                Tuna Framework применяет , компоненты которой
                реализуются в соответсвующих областях имен:
            </p>

            <ul>
                <li>
                    Отображение

                    <ul>
                        <li>
                            <code>tuna.ui</code> - классы-компоненты отображения,
                            такие как кнопки, всплывающие окна, списки выделения и тд.
                        </li>
                    </ul>
                </li>
                <li>
                    Модель

                    <ul>
                        <li>
                            <code>tuna.model</code> - классы для работы с моделью
                            данных приложения.
                        </li>
                        <li>
                            <code>tuna.rest</code> - классы для работы с удаленной
                            моделью данных приложения через REST-интерфейс.
                        </li>
                    </ul>
                </li>
                <li>
                    Контроллер

                    <ul>
                        <li>
                            <code>tuna.control</code> - базовые классы управления
                            логикой приложения.
                        </li>
                    </ul>
                </li>
            </ul>

            <p>
                Дополнительно библиотека содержит вспомогательный функционал,
                используемый в основных компонентах библиотеки:
            </p>

            <ul>
                <li>
                    <code>tuna.events</code> - классы реализующие событийную модель
                    используемую в приложении;
                </li>
                <li>
                    <code>tuna.tpml</code> - классы очень быстрого шаблонизатора;
                </li>
            </ul-->

                    <h2>
                        <a name="requirements"></a> Зависимости
                    </h2>

                    <hr />

                    <p>
                        На данный момент, для корректной работы, библиотека требует движок
                        CSS-селекторов соответсвующий внешнему интерфейсу движка
                        <a href="http://sizzlejs.com/" target="_blank">Sizzle</a>.
                    </p>

                    <p>
                        Список необходимых методов движка CSS-селекторов:
                    </p>

                    <ul>
                        <li>
                            <code>selectorEngine(selector, context)</code> - Поиск элементов
                            соотвествующих указанному селектору в указанном контексте.
                        </li>
                        <li>
                            <code>selectorEngine.matches(selector, elements)</code> -
                            Фильтрация элементов соотвествующих указанному селектору.
                        </li>
                        <li>
                            <code>selectorEngine.matchesSelector(element, selector)</code> -
                            Проверка соответствия элемента селектору.
                        </li>
                    </ul>

                    <p>
                        Так же, в качестве используемых имен утилитарных CSS-классов,
                        используются имена соответсвующие классам библиотеки
                        <a href="http://twitter.github.com/bootstrap/" target="_blank">Twitter Bootstrap</a>.
                    </p>

                    <p>
                        Например:
                    </p>

                    <ul>
                        <li>
                            <code>hide</code> - спрятанный элемент,
                        </li>
                        <li>
                            <code>show</code> - отображенный элемент,
                        </li>
                        <li>
                            <code>active</code> - активный элемент,
                        </li>
                        <li>
                            <code>...</code>
                        </li>
                    </ul>

                    <h2>
                        <a name="app-structure"></a> Структура приложения
                    </h2>

                    <hr />

                    <p>
                        Репозиторий приложения обычно имеет следующую структуру:
                    </p>

                    <ul>
                        <li>
                            <code>application</code> - папка содержащая исходные коды
                            конкретного приложения.
                        </li>
                        <li>
                            <code>library</code> - папка содержащая исходные коды
                            библиотек, используемых в приложении.
                        </li>
                        <li>
                            <code>public</code> - корневая папка веб-приложения, в которую
                            "собираются" исходники приложения.
                        </li>
                        <li>
                            <code>templates</code> - папка содержащая html-шаблоны
                            приложения.
                        </li>
                        <li>
                            <code>utils</code> - папка с утилитами для сборки приложения.
                        </li>
                        <li>
                            <code>Makefile</code> - файл сценария сборки приложения из
                            исходников.
                        </li>
                    </ul>

                    <h2>
                        <a name="build"></a> Сборка приложения
                    </h2>

                    <hr />

                    <p>
                        Для сборки сложного приложения удобно использовать утилиту
                        <a href="http://www.gnu.org/software/make/" target="_blank">GNU Make</a> (для
                        <a href="http://gnuwin32.sourceforge.net/packages/make.htm" target="_blank">windows</a>)
                        в связке с приложениями для сжатия/объединения <code>javascript</code>
                        (например <a href="https://developers.google.com/closure/compiler/" target="_blank">Closure Compiler</a>,
                        <a href="https://github.com/mishoo/UglifyJS" target="_blank">Uglify JS</a>, ...)
                        и для сбоки <code>html</code>-шаблонов (например <a href="http://mustache.github.com/" target="_blank">mustache</a>).
                    </p>

                    <p>
                        Пример <a href="https://gist.github.com/2405728" target="_blank">make-файла</a> для "компиляции" приложения
                        использующего Tuna Framework.
                    </p>

                    <h2>
                        <a name="hello-world"></a> Простейшее приложение
                    </h2>

                    <hr />

                    <p>
                        Для созданий простейшего приложения используем базовый шаблон
                        проекта
                        <a href="http://github.com/kononencheg/Hello-Tuna-Framework" target="_blank">
                            Hello Tuna Framework
                        </a>.
                    </p>

                    <p>
                        Клонируем репозиторий проекта:
                    </p>

                    <pre class="prettyprint linenums"><code>$ git clone git://github.com/kononencheg/Hello-Tuna-Framework.git</code></pre>

                    <p>
                        Основной код приложения содержится в файле
                        <code>application/control/main-controller.js</code>:
                    </p>

                    <pre class="prettyprint linenums"><code>var MainController = function() {
    tuna.control.ViewController.call(this);
    this._modules = [ 'popup' ];
};

tuna.utils.extend(MainController, tuna.control.ViewController);

MainController.prototype._initActions = function() {
    // Логика приложения инициализируется тут
};

tuna.control.setMainController(new MainController());</code></pre>

                    <p>
                        Список имен модулей-компонентов отображения, которые необходимо
                        проинициализировать в соответствующем контейнере находятся в массиве
                        <code>this._modules</code>.
                    </p>

                    <p>
                        В данном примере в основном контейнере приложения проинициализируется
                        модуль отображения <code>popup</code>.
                    </p>

                    <p>
                        Разметка контейнера отображения (<code>body</code>
                        для основного контроллера) расположена в файле
                        <code>public/index.html</code>:
                    </p>

                    <pre class="prettyprint linenums"><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
    &lt;meta charset="utf-8" /&gt;
    &lt;title&gt;Hello Tuna Framework!&lt;/title&gt;
    &lt;link rel="stylesheet" type="text/css"
          href="css/bootstrap.css" /&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class="j-popup hide" data-name="hello-popup"&gt;
        &lt;div class="modal"&gt;
            &lt;div class="modal-header"&gt;
                &lt;h3&gt;Hello Tuna Framework!&lt;/h3&gt;
            &lt;/div&gt;

            &lt;div class="modal-body"&gt;
                &lt;a class="j-popup-close btn pull-right"&gt;
                    Close
                &lt;/a&gt;
            &lt;/div&gt;
        &lt;/div&gt;
        &lt;div class="modal-backdrop"&gt;&lt;/div&gt;
    &lt;/div&gt;

    &lt;!--[if IE]&gt;--&gt;
        &lt;script type="text/javascript" src="js/json.js"&gt;&lt;/script&gt;
    &lt;!--&lt;![endif]--&gt;
    &lt;script type="text/javascript" src="js/sizzle.js"&gt;&lt;/script&gt;
    &lt;script type="text/javascript" src="js/app.js"&gt;&lt;/script&gt;
    &lt;script type="text/javascript"&gt;
        main(document.body);
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>

                    <p>
                        Блок <code>div</code> c CSS-классом <code>j-popup</code> при
                        инициализации отображения будет являться целевым DOM-элементом для
                        модуля <code>popup</code>. Для корректной работы модуля
                        <code>popup</code>, целевой контейнер в исходном состоянии должен быть
                        спрятан, для этого используется класс <code>hide</code>.
                    </p>

                    <p>
                        Чтобы показать всплывающее окно, необходимо добавить следующий код в
                        тело метода <code>_initActions()</code> класса <code>MainController</code>:
                    </p>

                    <pre class="prettyprint linenums"><code>MainController.prototype._initActions = function() {
    // По типу модуля и имени получаем экземпляр класса
    // всплывающего окна.
    var popup = this._container.getModuleInstanceByName
                                    ('popup', 'hello-popup');

    // Показываем окно
    popup.open();
};</code></pre>

                    <p>
                        <a href="#build">Собираем</a> приложение и проверяем
                        <a href="http://kononencheg.github.com/Hello-Tuna-Framework/" target="_blank">работающий пример</a>!
                    </p>

                    <pre><code>$ make && firefox public/index.html</code></pre>

                    <h2>
                        <a name="what-next"></a> Что дальше?
                    </h2>

                    <hr />

                    <p>
                        Для дальнейшего изучения библиотеки создан пример разработки приложения
                        <a href="https://github.com/kononencheg/Tuna-Framework/wiki/step-0-todo-list"
                           target="_blank">Список задач</a>.
                    </p>

                    <hr />

                </div>
            </div>

        </div>

        <script src="js/prettify.js"></script>
        <script>
            prettyPrint();
        </script>
    </body>
</html>
